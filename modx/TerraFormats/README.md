# TerraFormats

## 项目介绍

TerraFormats 是一个跨平台的 Terraria 模组框架，主要优点包括：

1. **跨平台支持** - 在手机端和PC端均可使用相同的语言包格式（未进行跨平台）
2. **多语言包加载** - 支持同时加载多个语言包
3. **智能排序系统** - 根据语言包优先级自动排序
4. **自动补全机制** - 当翻译缺失时，自动使用备用语言补全
5. **轻量高效** - 专为移动设备优化，加载速度快，内存占用低

##  语言包制作指南

### 语言包结构

标准语言包应包含以下文件和目录：

```
语言包名称.zip
├── config.json          // 配置文件
├── icon.png             // 图标文件（可选）
└── localization/        // 语言文件目录
    ├── Base.json        // 基础翻译
    ├── Game.json        // 游戏核心内容
    ├── Items.json       // 物品翻译
    ├── NPCs.json        // NPC翻译
    ├── Projectiles.json // 弹幕翻译
    └── Town.json        // 城镇相关翻译
    └── Legacy.json        // 世界相关翻译
    └── Mobile.json        // 移动端设置相关翻译
    ...  // 所有文件按照移动端+主机端
```

### config.json 配置规范

```json
{
    "name": "简体中文语言包",
    "author": "作者名",
    "version": "1.0.0",
    "introduce": "Terraria简体中文翻译",
    "autocomplete": "en-US",
    "type": "Common",
    "standard": 0
}
```

### 字段说明

| 字段 | 必填 | 说明 |
|------|------|------|
| name | 是 | 语言包名称 |
| author | 是 | 作者信息 |
| version | 是 | 语义化版本(如1.0.0) |
| introduce | 是 | 简短描述 |
| autocomplete | 是 | 补全语言代码(如zh-CN, en-US) |
| type | 是 | 必须为"Common" |
| standard | 是 | 标准语言包可为任意值(范围INT32MAX) |

## 语言文件规范

所有JSON文件使用UTF-8编码，结构示例如下：

## 制作流程

1. **准备工具**
   - 文本编辑器(推荐VSCode)
   - ZIP压缩工具
   - JSON验证工具

2. **创建语言文件**
   - 从原版游戏提取英文文本作为基础
   - 按类别创建JSON文件
   - 保持与原版相同的键结构

3. **打包发布**
   - 将所有文件放入localization目录
   - 添加config.json和 图标(图标可选)
   - 压缩为ZIP格式(存储模式)

## 高级功能(开发中)

未来将支持的TerraFormats类型语言包功能：
- 动态脚本翻译(Lua支持)
- 条件化文本显示
- 获取游戏数据

## 最佳实践

1. 保持键路径与原版一致
2. 为所有重要字段添加注释
3. 版本号遵循语义化版本规范
4. 测试所有关键路径的翻译
5. 提供有意义的autocomplete后备

## 常见问题

Q: 如何解决翻译冲突？
A: 系统会按优先级排序，高优先级语言包的翻译会覆盖低优先级的

Q: 能否只翻译部分内容？
A: 可以，系统会自动用autocomplete指定的语言补全缺失翻译

Q: 如何更新语言包？
A: 修改后更新version字段，用户可无缝升级

Q: 手机端有特殊要求吗？
A: 无特殊要求，与PC基本使用相同格式